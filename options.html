<!DOCTYPE html>
<html>
<head>
  <title>Kippt Options</title>
  <script type="text/javascript" src="js/vendor/jquery.js"></script>
  <script type="text/javascript">
    // Saves options to localStorage.
    function save_options() {
      var select = $("#color");
      var color = $("#color").val();
      localStorage["button_color"] = color;

      switch (localStorage["button_color"]) {
        case "grey":
          chrome.browserAction.setIcon({
            path: "img/icon19_grey.png"
          });
          break;
        default:
          chrome.browserAction.setIcon({
            path: "img/icon19.png"
          });
          break;
      }

      // Update status to let user know options were saved.
      $("#status").text("Saved!");
      setTimeout(function() {
        $("#status").text();
      }, 1500);
    }

    // Restores select box state to saved value from localStorage.
    function restore_options() {
      var color = localStorage["button_color"];
      if (!color) {
        return;
      }
      $("#color").find("option").each(function (index, option) {
        if ($(option).val() == color) {
          option.selected = "true";
        }
      });
    }

    $(function() {
      restore_options();
      $("button").click(save_options);
    });
  </script>
</head>
<body>
    <div class="button-color">
        <label>Button color:
            <select id="color">
                <option value="red">Red (default)</option>
                <option value="grey">Grey</option>
            </select>
       </label>
    </div>
    <div class="services">
        <h2>Services</h2>
        <ul>
            <li><input type="checkbox" value="facebook" id="id_facebook" /> <label for="id_facebook">Facebook</label></li>
            <li><input type="checkbox" value="twitter" id="id_twitter" /> <label for="id_twitter">Twitter</label></li>
            <li><input type="checkbox" value="tumblr" id="id_tumblr" /> <label for="id_tumblr">Tumblr</label></li>
            
            <li><input type="checkbox" value="instapaper" id="id_instapaper" /> <label for="id_instapaper">Instapaper</label></li>
            <li><input type="checkbox" value="readability" id="id_readability" /> <label for="id_readability">Readability</label></li>
            <li><input type="checkbox" value="pocket" id="id_pocket" /> <label for="id_pocket">Pocket</label></li>
            
        </ul>
    </div>
<br>
<button>Save</button>
<p id="status"></p>
</body>
</html>